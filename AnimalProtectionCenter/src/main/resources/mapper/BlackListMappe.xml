<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cafe24.memory.mapper.BlackListMapper">

	<resultMap type="BlackList" id="blackList">
		<result property="blackListNum" column="black_list_num"></result>
		<result property="blackListReason" column="black_list_reason"></result>
		<result property="blackListCancleReason" column="black_list_cancle_reason"></result>
		<result property="blackListDate" column="black_list_date"></result>
		<result property="blackListCancleDate" column="black_list_cancle_date"></result>
		
		<association property="staff" javaType="Staff">
			<result property="staffName" column="staff_name"></result>
		</association>
		
		<association property="member" javaType="Member">
			<result property="memberId" column="member_id"></result>
		</association>
	</resultMap>
	
	<!-- 리스트 -->
	<select id="selectBlackList" 
	resultType="BlackList"
	resultMap="blackList">
	
	SELECT 
		b.black_list_num, 
		m.member_id, 
		t.staff_name, 
		black_list_reason, 
		black_list_cancle_reason, 
		black_list_date, 
		black_list_cancle_date
	FROM 
		tb_black_list AS b
	INNER JOIN
		tb_member AS m
	INNER JOIN
		tb_staff AS t
	ON
		b.member_id=m.member_id
	AND
		b.staff_code=t.staff_code;
	</select>
</mapper>